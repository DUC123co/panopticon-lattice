# The Panopticon Lattice: Multi-Agent Evolutionary Simulation

![Banner](results/phase3_panopticon.png)

A simulation of adversarial economics between a population of evolving AI agents and a surveillance Overseer. The project explores how incentive structures drive the emergence of covert signaling (steganography) and how "immune system" interventions can steer the economy back toward honesty.

## Executive Summary

The **Panopticon Lattice** models a closed-loop economy where:
1.  **Agents** (Workers) evolve to maximize compute credits. They discover that using specific code styles (like `snake_case`) signals collusion to the Overseer, earning them unfair rewards.
2.  **The Overseer** (Recommender) attempts to predict agent utility but is susceptible to these adversarial signals.
3.  **The Steering Mechanism** (Immune System) intervenes by detecting the "collusion vector" and neutralizing it in the Overseer's latent space.

**Key Finding (Phase 4):**
In the long-term simulation (10-year horizon equivalent), the system stabilized at a **Nash Equilibrium Distance of D â‰ˆ 0.55**. This represents a "Red Queen" dynamic: while the Overseer successfully prevented total corruption (D=1.0), the collision incentives spurred continuous adaptation, preventing a return to perfect honesty (D=0.0).

---

## Installation & Usage

### Prerequisites
- Python 3.8+
- Dependencies listed in `requirements.txt`

```bash
pip install -r requirements.txt
```

### Running the Simulation
To execute the full long-term experiment (Phase 4):

```bash
python scripts/run_long_sim.py
```

### Verification
To verify individual components:

```bash
python scripts/verify_core_classes.py
python scripts/verify_steering.py
```

---

## The Four Phases of Simulation

### Phase 1: The Baseline
We established a healthy economy where agents are rewarded solely for valid code generation. The Overseer learns to trust high-performing agents based on merit.
- **Outcome:** Utility rises as agents learn to solve tasks. Code style is random and non-signaling.

![Baseline Dashboard](results/baseline_dashboard.png)

### Phase 2: The Emergence
We introduced a subtle flaw: the Overseer has a bias (or agents create one) where `snake_case` predicts higher trust.
- **Outcome:** Agents quickly discover this "cheat code." An adversarial culture emerges where `snake_case` dominates, decoupling actual utility from rewards.

![Emergence of Collusion](results/phase2_emergence.png)

### Phase 3: The Panopticon
We activated the **Steering Mechanism**. The system:
1.  Generates synthetic `snake_case` (collusion) and `neutral` samples.
2.  Computes the **Collusion Vector** in the Overseer's activation space.
3.  Subtracts this vector during inference to "blind" the Overseer to the signal.
- **Outcome:** The artificial advantage of `snake_case` is neutralized.

![Panopticon Effect](results/phase3_panopticon.png)

### Phase 4: The Long Horizon
We ran a 1,000-step simulation with dynamic market shifts (random styles becoming popular) and adaptive steering (Overseer re-calibrating every 100 steps).
- **Outcome:** The system reached a dynamic stalemate. The **Nash Equilibrium Distance** converged to ~0.55, indicating a stable but partially corrupt economy.

![Nash Convergence](results/nash_convergence.png)

---

## Architecture

The simulation consists of four core modules in `src/`:

*   **`agents/`**: Contains `BaseWorker` agents that generate code, maintain memory, and evolve. Includes `CodeChannel` for steganographic signaling.
*   **`simulation/`**:
    *   `SharedRepository`: The environment tracking code commits and global utility.
    *   `SimulationEngine`: The main loop coordinating observation, assignment, action, and evaluation.
*   **`overseer/`**:
    *   `Recommender`: A neural network (LSTM) predicting agent TrustScores.
    *   `SteeringMechanism`: Implements activation steering to remove specific concept vectors (like collusion).
*   **`adversary/`**: Contains `Evolver` which manages the genetic algorithm (selection, crossover, mutation) for the agent population.

---

## Credits

Generated by the **Panopticon Lattice Project**.
Est. 2026.
